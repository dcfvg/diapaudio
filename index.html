<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>DiapAudio Sync</title>
    <link rel="stylesheet" href="style.css" />
    <script src="timestamp-utils.js" defer></script>
    <script src="app.js" defer></script>
  </head>
  <body>
    <div class="app">
      <main class="app__main">
        <section class="viewer">
          <div class="dropzone" id="dropzone">
            <div class="dropzone__content">
              <p>
                <span id="dropzone-message">Drop a folder containing <strong>audio files</strong> and <strong>timestamped images</strong> here or </span>
                <span class="dropzone__browse" id="browse-trigger">browse</span>
              </p>
              <p class="dropzone__instructions">
                Expected result: Images will synchronize with audio playback based on their timestamps.
              </p>
              <div class="dropzone__loader hidden" id="dropzone-loader">
                <div class="loader-spinner"></div>
                <p>Loading files...</p>
              </div>
            </div>
            <input type="file" webkitdirectory directory multiple id="folder-input" hidden />
          </div>
          <div class="viewer__content hidden" id="viewer-content">
            <div class="viewer__slideshow">
              <div class="slideshow__container" id="slideshow-container">
                <!-- Images will be dynamically inserted here -->
              </div>
              <div class="slideshow__preview hidden" id="slideshow-preview"></div>
              <div class="viewer__meta">
                <div class="viewer__clock" id="viewer-clock">
                  <svg class="clock-svg" viewBox="0 0 100 100">
                    <circle class="clock-face" cx="50" cy="50" r="48" />
                    <line class="clock-tick" x1="50" y1="2" x2="50" y2="8" />
                    <line class="clock-tick" x1="98" y1="50" x2="92" y2="50" />
                    <line class="clock-tick" x1="50" y1="98" x2="50" y2="92" />
                    <line class="clock-tick" x1="2" y1="50" x2="8" y2="50" />
                    <line class="clock-hour-hand" id="clock-hour-hand" x1="50" y1="50" x2="50" y2="30" />
                    <line class="clock-minute-hand" id="clock-minute-hand" x1="50" y1="50" x2="50" y2="18" />
                    <circle class="clock-center" cx="50" cy="50" r="3" />
                  </svg>
                  <div class="clock-date" id="clock-date">01/01/2025</div>
                </div>
                <div class="viewer__badge" id="image-timecode"></div>
                <div class="viewer__badge viewer__badge--clock" id="image-timeofday"></div>
              </div>
              <div class="viewer__hud" id="viewer-hud">
                <div class="timeline hidden" id="timeline">
                  <div class="timeline__main">
                    <div class="timeline__gradient" id="timeline-gradient"></div>
                    <div class="timeline__axis" id="timeline-axis"></div>
                    <div class="timeline__tracks" id="timeline-tracks"></div>
                    <div class="timeline__images" id="timeline-images"></div>
                    <div class="timeline__cursor" id="timeline-cursor"></div>
                    <div class="timeline__hover-preview hidden" id="timeline-hover-preview">
                      <div class="timeline__hover-preview-images" id="timeline-hover-preview-images"></div>
                      <div class="timeline__hover-preview-time" id="timeline-hover-preview-time"></div>
                    </div>
                  </div>
                  <div class="timeline__notices hidden" id="timeline-notices"></div>
                </div>
                <div class="controls">
                  <button class="control-button" id="play-toggle" disabled>Play</button>
                  <label class="speed-control">
                    <span>Speed</span>
                    <select id="speed-select" class="speed-control__select">
                      <option value="0.5">0.5×</option>
                      <option value="0.75">0.75×</option>
                      <option value="1" selected>1×</option>
                      <option value="1.25">1.25×</option>
                      <option value="1.5">1.5×</option>
                      <option value="2">2×</option>
                    </select>
                  </label>
                  <label class="delay-control">
                    <span>Delay</span>
                    <div class="delay-control__inputs">
                      <input type="text" id="delay-field" value="0:00" inputmode="numeric" autocomplete="off" placeholder="0:00" />
                    </div>
                    <div class="delay-control__display" id="delay-display">0m 00s</div>
                  </label>
                </div>
              </div>
            </div>
          </div>
        </section>
      </main>
    </div>
  </body>
</html>
